<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>QR AR Experience</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

  <!-- AR.js -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <a-scene
    embedded
    arjs="sourceType: webcam; debugUIEnabled: false;"
    vr-mode-ui="enabled: false"
    renderer="antialias: true; precision: mediump;"
    device-orientation-permission-ui="enabled: false">

    <!-- MARKER (REAL SIZE: 8 CM) -->
    <a-marker
      id="qrMarker"
      type="pattern"
      url="pattern-prompt.patt"
      size="0.08"
      smooth="true"
      smoothCount="8"
      smoothTolerance="0.01"
      smoothThreshold="3">

      <!-- ROOT CONTROLLER -->


        <!-- MODEL -->
        <a-entity
          id="myModel"
          class="clickable"
          gltf-model="starwars.glb"
          scale="0.5 0.5 0.5"
          position="-90 0 0"
          animation-mixer>
        </a-entity>

    </a-marker>

    <!-- CAMERA -->
    <a-entity
      camera
      cursor="fuse: false; rayOrigin: mouse"
      raycaster="objects: .clickable; far: 20">
    </a-entity>

  </a-scene>

  <!-- CLICK HANDLER -->
  <script>
    window.addEventListener("load", () => {
      const marker = document.querySelector("#qrMarker");
      let markerVisible = false;

      marker.addEventListener("markerFound", () => markerVisible = true);
      marker.addEventListener("markerLost", () => markerVisible = false);

      document.body.addEventListener("touchstart", () => {
        if (markerVisible) {
          window.location.href =
            "https://docs.google.com/forms/d/e/1FAIpQLSfgLZr0uIQ81sPfP9EHR4S_IZmo_wcH8OsMMHhN9E9OBW8CPQ/viewform";
        }
      });
    });
  </script>
</body>
</html>


